require File.dirname(__FILE__) + '/spec_helper'

include Babygitter::DateTimeArrays

describe Babygitter::DateTimeArrays do
  
  it "should create an array of 52 datetimes leading back from now to be used in generating the graph" do
    Time.should_receive(:now).and_return(Time.utc(2008,"jan",1,20,15,1))
    create_52_week_map.should == ["01 2007", "02 2007", "03 2007", "04 2007", "05 2007", "06 2007", 
      "07 2007", "08 2007", "09 2007", "10 2007", "11 2007", "12 2007", "13 2007", 
      "14 2007", "15 2007", "16 2007", "17 2007", "18 2007", "19 2007", "20 2007",
      "21 2007", "22 2007", "23 2007", "24 2007", "25 2007", "26 2007", "27 2007", 
      "28 2007", "29 2007", "30 2007", "31 2007", "32 2007", "33 2007", "34 2007", 
      "35 2007", "36 2007", "37 2007", "38 2007", "39 2007", "40 2007", "41 2007", 
      "42 2007", "43 2007", "44 2007", "45 2007", "46 2007", "47 2007", "48 2007",
      "49 2007", "50 2007", "51 2007", "00 2008"]
  end
  
  it "should create a data_map_array" do
    began = Time.utc(2007,"oct",10,20,15,1)
    ended = Time.utc(2008,"apr",15,20,15,1)
    create_active_date_array(began, ended).should == ["40 2007", "41 2007", "42 2007", "43 2007", "44 2007", "45 2007", 
      "46 2007", "47 2007", "48 2007", "49 2007", "50 2007", "51 2007", "52 2007", "00 2008", "01 2008", "02 2008", 
      "03 2008", "04 2008", "05 2008", "06 2008", "07 2008", "08 2008", "09 2008", "10 2008", "11 2008", "12 2008", 
      "13 2008", "14 2008", "15 2008"]
  end
  
end

